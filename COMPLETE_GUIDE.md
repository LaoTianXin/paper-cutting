# 🎭 AI 视觉检测平台 - 完整使用指南

## 🚀 快速开始

```bash
# 安装依赖（如果还没有）
pnpm install

# 启动开发服务器
pnpm dev

# 访问应用
http://localhost:3000
```

---

## 🎯 五种检测模式

### 1️⃣ 📹 人脸检测（摄像头实时）

**适合**：演示实时人脸检测

**特点**：
- ✅ 实时检测摄像头中的人脸
- ✅ 自动标记人脸位置
- ✅ 蓝色矩形框显示
- ✅ 使用 Haar Cascade 算法

**使用方法**：
1. 点击 **"📹 人脸检测"**
2. 允许摄像头权限
3. 自动开始检测

---

### 2️⃣ 📸 图片（人脸图片上传）

**适合**：测试特定图片

**特点**：
- ✅ 上传图片或拍照
- ✅ 自动检测人脸
- ✅ 原图与结果对比
- ✅ 支持 JPG、PNG 等格式

**使用方法**：
1. 点击 **"📸 图片"**
2. 上传图片或拍照
3. 查看检测结果

---

### 3️⃣ 🎬 人脸视频（视频文件人脸检测）

**适合**：分析视频中的人脸

**特点**：
- ✅ 上传视频文件
- ✅ 逐帧人脸检测
- ✅ 实时 FPS 显示
- ✅ 支持暂停/继续
- ✅ 原视频与结果并排显示

**使用方法**：
1. 点击 **"🎬 人脸视频"**
2. 上传视频文件
3. 点击 **"▶️ 播放检测"**
4. 观看实时检测结果

---

### 4️⃣ 👌 OK摄像头（手势识别实时）

**适合**：实时手势识别演示

**特点**：
- ✅ 实时识别 OK 手势
- ✅ 21 个手部关键点检测
- ✅ 置信度实时显示
- ✅ 手部骨架可视化
- ✅ 支持最多 2 只手
- ✅ 使用 Google MediaPipe

**使用方法**：
1. 点击 **"👌 OK摄像头"**
2. 允许摄像头权限
3. 做出 OK 手势（大拇指和食指形成圆圈，其他三指伸直）
4. 看到 "OK 👌" 提示

---

### 5️⃣ 🎥 OK视频（视频文件手势识别）⭐ 新功能

**适合**：无摄像头或需要测试视频中的手势

**特点**：
- ✅ 上传视频文件进行手势识别
- ✅ 逐帧检测 OK 手势
- ✅ 实时显示识别结果
- ✅ 手部骨架可视化
- ✅ 置信度显示
- ✅ FPS 实时监控
- ✅ 支持暂停/继续

**使用方法**：
1. 点击 **"🎥 OK视频"**
2. 上传包含手势的视频
3. 点击 **"▶️ 播放检测"**
4. 视频中出现 OK 手势时自动识别

**推荐视频**：
- 时长：10-30 秒
- 分辨率：720p
- 格式：MP4
- 内容：清晰的 OK 手势

---

## 📊 功能对比表

| 功能 | 人脸检测 | 图片 | 人脸视频 | OK摄像头 | OK视频 ⭐ |
|-----|---------|------|---------|---------|----------|
| 实时检测 | ✅ | ❌ | ✅ | ✅ | ✅ |
| 需要摄像头 | ✅ | ❌ | ❌ | ✅ | ❌ |
| 支持文件上传 | ❌ | ✅ | ✅ | ❌ | ✅ |
| 可暂停 | ❌ | - | ✅ | ❌ | ✅ |
| FPS 显示 | ❌ | - | ✅ | ❌ | ✅ |
| 并排对比 | ❌ | ✅ | ✅ | ❌ | ✅ |
| 关键点显示 | ❌ | ❌ | ❌ | ✅ | ✅ |
| 置信度显示 | ❌ | ❌ | ❌ | ✅ | ✅ |

---

## 🎨 界面布局

```
┌─────────────────────────────────────────────────────────┐
│              🎭 AI 视觉检测平台                         │
├─────────────────────────────────────────────────────────┤
│  📹人脸检测 │ 📸图片 │ 🎬人脸视频 │ 👌OK摄像头 │ 🎥OK视频 │
├─────────────────────────────────────────────────────────┤
│                                                         │
│                    [检测区域]                           │
│                                                         │
├─────────────────────────────────────────────────────────┤
│              [状态显示 / 控制按钮]                      │
└─────────────────────────────────────────────────────────┘
```

---

## 🎥 OK视频模式详解

### 界面组成

#### 1. 视频控制区
```
┌────────────────────────────────────────┐
│ ▶️ 播放检测 │ 🔄 重新开始 │ 🎯 FPS: 28 │
└────────────────────────────────────────┘
```

#### 2. 视频显示区（并排对比）
```
┌──────────────────┬──────────────────┐
│   原始视频       │   检测结果       │
│   [视频播放]     │   [实时检测]     │
└──────────────────┴──────────────────┘
```

#### 3. 手势信息卡片
```
┌──────────────┬──────────────┐
│  当前手势    │   置信度     │
│  OK 👌       │  ████ 85%    │
└──────────────┴──────────────┘
```

### 使用技巧

**录制视频建议**：
1. 使用手机后置摄像头（画质更好）
2. 保持稳定（使用三脚架或支撑物）
3. 确保手势清晰可见
4. 光线充足
5. 避免快速移动

**手势要点**：
- ✅ 大拇指和食指形成圆圈
- ✅ 其他三指向上伸直
- ✅ 手掌正面朝向摄像头
- ✅ 保持手势 1-2 秒

**性能优化**：
- 使用较短的视频（30秒内）
- 分辨率建议 720p
- MP4 格式最佳
- 如果卡顿，降低视频分辨率

---

## 📱 手机使用

### 访问方式

```bash
# 1. 启动服务器
pnpm dev

# 2. 查看电脑 IP
ipconfig  # Windows
ifconfig  # Mac/Linux

# 3. 手机浏览器访问
http://你的IP:3000
```

### 手机推荐模式

| 模式 | 推荐度 | 原因 |
|-----|-------|------|
| 📸 图片 | ⭐⭐⭐⭐⭐ | 可以直接拍照上传 |
| 🎥 OK视频 | ⭐⭐⭐⭐⭐ | 可以录制视频测试 |
| 🎬 人脸视频 | ⭐⭐⭐⭐ | 上传视频测试 |
| 👌 OK摄像头 | ⭐⭐⭐ | 需要摄像头权限 |
| 📹 人脸检测 | ⭐⭐⭐ | 需要摄像头权限 |

---

## ⚡ 性能说明

### 处理速度

| 模式 | 电脑 | 手机 |
|-----|------|------|
| 人脸检测 | 实时 30 FPS | 20-30 FPS |
| 图片 | 即时 | 即时 |
| 人脸视频 | 25-30 FPS | 15-25 FPS |
| OK摄像头 | 实时 30 FPS | 20-30 FPS |
| OK视频 | 25-30 FPS | 15-25 FPS |

### 资源占用

| 资源 | 人脸检测 | 手势识别 |
|-----|---------|---------|
| CPU | 20-30% | 20-40% |
| 内存 | ~50MB | ~100MB |
| 首次加载 | ~1MB | ~5MB |

---

## 🐛 常见问题

### Q1: 视频上传后无法识别？

**检查清单**：
- ✅ 是否点击了"播放检测"按钮
- ✅ 视频格式是否支持（推荐 MP4）
- ✅ 模型是否加载完成
- ✅ 视频中手势是否清晰

### Q2: 手势识别不准确？

**改善方法**：
- ✅ 确保手势标准（圆圈闭合、其他手指伸直）
- ✅ 提高视频光线
- ✅ 手部完整在画面内
- ✅ 避免快速移动

### Q3: 视频处理很慢？

**解决方案**：
- ✅ 使用较短的视频
- ✅ 降低视频分辨率
- ✅ 压缩视频文件
- ✅ 关闭其他占用资源的程序

### Q4: 手机无法访问？

**检查事项**：
- ✅ 手机和电脑在同一 WiFi
- ✅ IP 地址正确
- ✅ 端口是 3000
- ✅ 防火墙允许访问
- ✅ 开发服务器正在运行

---

## 🎓 技术详解

### 人脸检测
- **算法**：Haar Cascade Classifier
- **模型**：haarcascade_frontalface_default.xml
- **特点**：快速、轻量级
- **准确率**：中等（适合正面人脸）

### 手势识别
- **算法**：Google MediaPipe Hands
- **检测**：21 个手部关键点
- **特点**：高准确率、实时检测
- **准确率**：90%+（理想条件下）

### OK 手势判断标准
```typescript
✅ 大拇指-食指距离 < 0.08
✅ 中指、无名指、小指伸直
✅ 综合置信度 ≥ 80%
```

---

## 📚 相关文档

- `OK_GESTURE_GUIDE.md` - OK 手势详细指南
- `GESTURE_RECOGNITION_GUIDE.md` - 手势识别技术说明
- `USAGE_GUIDE.md` - 原版使用指南

---

## 🌟 功能亮点

### 已实现
- ✅ 5 种检测模式
- ✅ 实时检测
- ✅ 视频上传
- ✅ 图片上传
- ✅ 手势识别
- ✅ 人脸检测
- ✅ FPS 显示
- ✅ 置信度显示
- ✅ 手部骨架可视化
- ✅ 响应式设计
- ✅ 手机适配

### 可扩展
- 🔜 更多手势（👍、✌️、✊等）
- 🔜 手势录制功能
- 🔜 批量图片处理
- 🔜 导出检测结果
- 🔜 自定义置信度阈值

---

## 🎉 开始使用

```bash
pnpm dev
```

**电脑访问**：http://localhost:3000  
**手机访问**：http://你的IP:3000

---

## 💡 最佳实践

### 测试建议

1. **先测试图片模式**
   - 了解基本功能
   - 测试各种情况

2. **再测试视频模式**
   - 使用短视频
   - 观察性能

3. **最后测试实时模式**
   - 演示效果
   - 实际应用

### 视频录制技巧

**人脸检测视频**：
- 正面拍摄
- 光线均匀
- 避免剧烈移动
- 多人测试效果更好

**手势识别视频**：
- 手势清晰
- 保持稳定
- 光线充足
- 手部完整在画面内

---

祝你使用愉快！🎊✨

